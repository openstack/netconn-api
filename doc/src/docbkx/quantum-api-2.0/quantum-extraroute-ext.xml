<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE section [
<!-- Some useful entities borrowed from HTML -->
<!ENTITY ndash  "&#x2013;">
<!ENTITY mdash  "&#x2014;">
<!ENTITY hellip "&#x2026;">
<!ENTITY plusmn "&#xB1;">

<!-- Useful for describing APIs -->
<!ENTITY GET    '<command xmlns="http://docbook.org/ns/docbook">GET</command>'>
<!ENTITY PUT    '<command xmlns="http://docbook.org/ns/docbook">PUT</command>'>
<!ENTITY POST   '<command xmlns="http://docbook.org/ns/docbook">POST</command>'>
<!ENTITY DELETE '<command xmlns="http://docbook.org/ns/docbook">DELETE</command>'>

<!ENTITY CHECK  '<inlinemediaobject xmlns="http://docbook.org/ns/docbook">
 <imageobject>
  <imagedata fileref="figures/Check_mark_23x20_02.svg"
     format="SVG" scale="60"/>
</imageobject>
      </inlinemediaobject>'>

<!ENTITY ARROW  '<inlinemediaobject xmlns="http://docbook.org/ns/docbook">
 <imageobject>
  <imagedata fileref="figures/Arrow_east.svg"
     format="SVG" scale="60"/>
</imageobject>
      </inlinemediaobject>'>
 <!ENTITY APIv2   'Quantum API v2.0'>
]>
<section xmlns="http://docbook.org/ns/docbook"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    xmlns:xi="http://www.w3.org/2001/XInclude"
    xmlns:svg="http://www.w3.org/2000/svg"
    xmlns:m="http://www.w3.org/1998/Math/MathML"
    xmlns:html="http://www.w3.org/1999/xhtml"
    xmlns:db="http://docbook.org/ns/docbook" version="5.0"
    status="final" xml:id="extraroute-ext">
    <title>The ExtraRoute Extension</title>
    <para>ExtraRoute</para>
    <para>
        You can setup route configutaion on the Router using this this extension.
        This extension extends Router resource adding new attribute route.
        OVS plugin, linuxbridge plugin, metaplugin,  NEC plugin, Ryu plugin supports this extension.
    </para>
    <para>
        Note NextHopIp should be connected via one router interface.
        This is why confiration of route property is allowd only on Update time.
    </para>
   <table rules="all">
       <caption>Router Attributes</caption>
       <col width="20%"/>
       <col width="8%"/>
       <col width="10%"/>
       <col width="7%"/>
       <col width="15%"/>
       <col width="15%"/>
       <col width="25%"/>
       <thead>
           <tr>
               <th>Attribute </th>
               <th>Type </th>
               <th>Required </th>
               <th>CRUD<footnote xml:id="crud_extraroute">
                       <para>
                           <itemizedlist>
                              <listitem>
                              <para><emphasis role="bold"
                              >C</emphasis>. Use the attribute in
                              create operations. </para>
                              </listitem>
                              <listitem>
                              <para><emphasis role="bold"
                              >R</emphasis>. This attribute is
                              returned in response to show and
                              list operations. </para>
                              </listitem>
                              <listitem>
                              <para><emphasis role="bold"
                              >U</emphasis>. You can update the
                              value of this attribute.</para>
                              </listitem>
                              <listitem>
                              <para><emphasis role="bold"
                              >D</emphasis>. You can delete the
                              value of this attribute. </para>
                              </listitem>
                           </itemizedlist>
                       </para>
                   </footnote></th>
               <th>Default Value </th>
               <th>Validation Constraints </th>
               <th>Notes</th>
           </tr>
       </thead>
       <tbody>
           <tr>
               <td>routes</td>
               <td>dict</td>
               <td>No</td>
               <td>U</td>
               <td>None</td>
               <td>Dict should be this form.
                   {'nexthop':NextHopIP, 'destination':CIDR}
               </td>
               <td>Extra route configration</td>
           </tr>
       </tbody>
   </table>
   <section xml:id="update_extra_route">
       <title>Update Extra route</title>
       <para>
           <informaltable rules="all" width="100%">
               <col width="20%"/>
               <col width="20%"/>
               <col width="60%"/>
               <thead>
                   <tr>
                       <td>Verb</td>
                       <td>URI</td>
                       <td>Description</td>
                   </tr>
               </thead>
               <tbody>
                   <tr>
                       <td>&PUT;</td>
                       <td>/routers/<parameter>router_id</parameter></td>
                       <td>Update logical router with routes attribute.</td>
                   </tr>
               </tbody>
           </informaltable>
       </para>
       <para>Normal Response Code: <returnvalue>200</returnvalue>
       </para>
       <simpara>Error Response Codes: Unauthorized
               (<errorcode>401</errorcode>), Bad Request
               (<errorcode>400</errorcode>), Not Found
               (<errorcode>404</errorcode>), Conflict
               (<errorcode>409</errorcode>)</simpara>
           <para>This operation configures extra routes on the
               logical router. NextHop address should be connected
               with the logical Router, otherwise quantum responds
               <literal>400 Bad Request</literal>
           </para>
       <example>
           <title>Update routes attribute router: Request</title>
           <programlisting language="json"> PUT  /v2.0/routers/babc8173-46f6-4b6f-8b95-38c1683a4e22.json

{"router":
    {
     "routes": [{"nexthop": "10.1.0.10",
     "destination": "40.0.1.0/24"}]
    }
}
           </programlisting>
            </example>
            <example>
                <title>Update routes: Response</title>
                <programlisting language="json">{"router":
    {"status": "ACTIVE",
    "external_gateway_info": {"network_id": "5c26e0bb-a9a9-429c-9703-5c417a221096"},
    "name": "router1",
    "admin_state_up": true,
    "tenant_id": "936fa220b2c24a87af51026439af7a3e",
    "routes": [{"nexthop": "10.1.0.10", "destination": "40.0.1.0/24"}],
    "id": "babc8173-46f6-4b6f-8b95-38c1683a4e22"}
}
                </programlisting>
            </example>
        </section>
        <?hard-pagebreak?>

</section>
