<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE book[
<!-- Useful for describing APIs -->
<!ENTITY GET    '<command xmlns="http://docbook.org/ns/docbook">GET</command>'>
<!ENTITY PUT    '<command xmlns="http://docbook.org/ns/docbook">PUT</command>'>
<!ENTITY POST   '<command xmlns="http://docbook.org/ns/docbook">POST</command>'>
<!ENTITY DELETE '<command xmlns="http://docbook.org/ns/docbook">DELETE</command>'>
]>
<section xml:id="allowed_address_pair_ext"
    xmlns="http://docbook.org/ns/docbook"
    xmlns:xi="http://www.w3.org/2001/XInclude"
    xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0">
    <title>Allowed address pairs</title>
    <para>The allowed address pair extension extends the port
        attribute to enable you to specify arbitrary
        mac_address/ip_address(cidr) pairs that are allowed to pass
        through a port regardless of the subnet associated with the
        network.</para>
    <section xml:id="allowed_address_pair_ext_port_list">
        <title>List ports</title>
        <para>
            <informaltable rules="all" width="100%">
                <col width="20%"/>
                <col width="20%"/>
                <col width="60%"/>
                <thead>
                    <tr>
                        <td>Verb</td>
                        <td>URI</td>
                        <td>Description</td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>&GET;</td>
                        <td>/ports</td>
                        <td>Lists ports with their allowed address
                            pair attributes.</td>
                    </tr>
                </tbody>
            </informaltable>
        </para>
        <para>Normal Response Code: 200 OK</para>
        <para>Error Response Codes: 401 Unauthorized</para>
        <para>This operation returns, for each port, its allowed
            address pair attributes as well as all the attributes
            normally returned by the list port operation.</para>
        <example>
            <title>List ports with allowed address pair attributes:
                JSON response</title>
            <programlisting language="json"><xi:include href="samples/address-pairs/ports-get-res-addr-pairs.json" parse="text"/></programlisting>
        </example>
        <example>
            <title>List ports with allowed address pair attributes:
                XML response</title>
            <programlisting language="json"><xi:include href="samples/address-pairs/ports-get-res-addr-pairs.xml" parse="text"/></programlisting>
        </example>
    </section>
    <section xml:id="allowed_address_pair_port_show">
        <title>Show port details</title>
        <para>
            <informaltable rules="all" width="100%">
                <col width="10%"/>
                <col width="30%"/>
                <col width="60%"/>
                <thead>
                    <tr>
                        <td>Verb</td>
                        <td>URI</td>
                        <td>Description</td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>&GET;</td>
                        <td>/ports/<parameter>port_id</parameter></td>
                        <td>Shows details about a specified port,
                            including allowed address pair
                            attributes.</td>
                    </tr>
                </tbody>
            </informaltable>
        </para>
        <para>Normal Response Code: 200 OK</para>
        <para>Error Response Code: 401 Unauthorized, 404 Not
            Found</para>
        <example>
            <title>Show port with allowed address pair attributes:
                JSON response</title>
            <programlisting language="json"><xi:include href="samples/address-pairs/ports-show-addr-pair.json" parse="text"/></programlisting>
        </example>
        <example>
            <title>Show port with allowed address pair attributes: XML
                response</title>
            <programlisting language="json"><xi:include href="samples/address-pairs/ports-show-addr-pair.xml" parse="text"/></programlisting>
        </example>
    </section>
    <section xml:id="allowed_address_pair_port_create">
        <title>Create port</title>
        <para>
            <informaltable rules="all" width="100%">
                <col width="20%"/>
                <col width="20%"/>
                <col width="60%"/>
                <thead>
                    <tr>
                        <td>Verb</td>
                        <td>URI</td>
                        <td>Description</td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>&POST;</td>
                        <td>/ports</td>
                        <td>Creates a port and explicitly specifies
                            the allowed address pair attributes.</td>
                    </tr>
                </tbody>
            </informaltable>
        </para>
        <para>Normal Response Code: 201</para>
        <para>Error Response Code: 400 Bad Request, 401 Unauthorized,
            403 Forbidden</para>
        <para>Bad request is returned if an allowed address pair
            matches the mac_address and ip_address on port.</para>
        <para>Note: If the mac_address field is left out of the body
            of the request the mac_address assigned to the port will
            be used.</para>
        <example>
            <title>Create port with allowed address pair attributes:
                JSON request</title>
            <programlisting language="json"><xi:include href="samples/address-pairs/ports-post-req-addr-pairs.json" parse="text"/></programlisting>
        </example>
    </section>
    <section xml:id="allowed_address_pair_port_update">
        <title>Update port</title>
        <para>
            <informaltable rules="all" width="100%">
                <col width="10%"/>
                <col width="30%"/>
                <col width="60%"/>
                <thead>
                    <tr>
                        <td>Verb</td>
                        <td>URI</td>
                        <td>Description</td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>&PUT;</td>
                        <td>/ports/<parameter>port_id</parameter></td>
                        <td>Updates a port, with new allowed address
                            pair values.</td>
                    </tr>
                </tbody>
            </informaltable>
        </para>
        <para>Normal Response Code: 200 OK</para>
        <para>Error Response Code: 400 Bad Request, 401 Unauthorized,
            404 Not Found, 403 Forbidden</para>
        <example>
            <title>Update allowed address pair attributes for a port:
                JSON request</title>
            <programlisting language="json"><xi:include href="samples/address-pairs/ports-put-req-addr-pair.json" parse="text"/></programlisting>
        </example>
    </section>
</section>
