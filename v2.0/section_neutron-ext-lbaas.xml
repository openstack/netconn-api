<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE section [
<!ENTITY GET    '<command xmlns="http://docbook.org/ns/docbook">GET</command>'>
<!ENTITY PUT    '<command xmlns="http://docbook.org/ns/docbook">PUT</command>'>
<!ENTITY POST   '<command xmlns="http://docbook.org/ns/docbook">POST</command>'>
<!ENTITY DELETE '<command xmlns="http://docbook.org/ns/docbook">DELETE</command>'>
]>
<section xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"
    xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:svg="http://www.w3.org/2000/svg"
    xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns:html="http://www.w3.org/1999/xhtml"
    xmlns:db="http://docbook.org/ns/docbook" version="5.0" status="final" xml:id="lbaas_ext">
    <title>Load-Balancer-as-a-Service (LBaaS)</title>
    <para>The LBaaS extension enables OpenStack tenants to load-balance their VM traffic.</para>
    <para>The extension enables you to:</para>
    <itemizedlist>
        <listitem>
            <para>Load-balance client traffic from one network to application services, such as VMs,
                on the same or a different network.</para>
        </listitem>
        <listitem>
            <para>Load-balance several protocols, such as TCP and HTTP.</para>
        </listitem>
        <listitem>
            <para>Monitor the health of application services.</para>
        </listitem>
        <listitem>
            <para>Support session persistence.</para>
        </listitem>
    </itemizedlist>
    <section xml:id="lbaas_ext_concepts">
        <title>Concepts</title>
        <para>This extension introduces these concepts:</para>
        <variablelist>
            <varlistentry>
                <term>Load balancers</term>
                <listitem>
                    <para>The primary load balancing configuration object. Specifies the virtual IP
                        address where client traffic is received.</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>Pools</term>
                <listitem>
                    <para>A logical set of devices, such as web servers, that you group together to
                        receive and process traffic.</para>
                    <para>The load-balancing algorithm chooses which member of the pool handles new
                        requests or connections that are received on a listener. Each listener has
                        one default pool.</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>Listener</term>
                <listitem>
                    <para>Represents a single listening port. Defines the protocol and can
                        optionally provide TLS termination.</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>Members</term>
                <listitem>
                    <para>The application that runs on the back-end server.</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>Health monitors</term>
                <listitem>
                    <para>Determines whether or not back-end members of the pool can process a
                        request. A pool can have one health monitor associated with it.</para>
                    <para>The LBaaS extension supports these types of health monitors:</para>
                    <itemizedlist>
                        <listitem>
                            <para><emphasis role="bold">PING</emphasis>. Pings the members by using
                                ICMP.</para>
                        </listitem>
                        <listitem>
                            <para><emphasis role="bold">TCP</emphasis>. Connects to the members by
                                using TCP.</para>
                        </listitem>
                        <listitem>
                            <para><emphasis role="bold">HTTP</emphasis>. Sends an HTTP request to
                                the member.</para>
                        </listitem>
                        <listitem>
                            <para><emphasis role="bold">HTTPS</emphasis>. Sends a secure HTTP
                                request to the member.</para>
                        </listitem>
                    </itemizedlist>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>Session persistence</term>
                <listitem>
                    <para>Forces connections or requests in the same session to be processed by the
                        same member as long as it is active.</para>
                    <para>The LBaaS extension supports these types of persistence:</para>
                    <itemizedlist>
                        <listitem>
                            <para><emphasis role="bold">SOURCE_IP</emphasis>. All connections that
                                originate from the same source IP address are handled by the same
                                member of the pool.</para>
                        </listitem>
                        <listitem>
                            <para><emphasis role="bold">HTTP_COOKIE</emphasis>. The load balancing
                                function creates a cookie on the first request from a client.
                                Subsequent requests that contain the same cookie value are handled
                                by the same member of the pool.</para>
                        </listitem>
                        <listitem>
                            <para><emphasis role="bold">APP_COOKIE</emphasis>. The load balancing
                                function relies on a cookie established by the back-end application.
                                All requests with the same cookie value are handled by the same
                                member of the pool.</para>
                        </listitem>
                    </itemizedlist>
                    <para>Absence of <code>session_persistence</code> attribute means no session
                        persistence mechanism is used.</para>
                    <para>When no session persistence is used, the <code>session_persistence</code>
                        attribute does not appear in the API response and instead returns
                        null.</para>
                    <para>You can clear session persistence by sending <code>null</code> in
                            <code>session_persistence</code> attribute in a listener update
                        request.</para>
                </listitem>
            </varlistentry>
        </variablelist>
    </section>
    <section xml:id="lbaas_ext_flow">
        <title>Use the LBaaS extension to configure load balancing</title>
        <para>You must complete these high-level tasks:</para>
        <procedure>
            <title>To use the LBaaS extension to configure load balancing</title>
            <step>
                <para>Create a load balancer object.</para>
            </step>
            <step>
                <para>Create a listener.</para>
            </step>
            <step>
                <para>Associate the listener with the load balancer.</para>
            </step>
            <step>
                <para>Associate the pool with the listener.</para>
            </step>
            <step>
                <para>Optional. If you use HTTPS termination, complete these tasks:</para>
                <substeps>
                    <step>
                        <para>Add the TLS certificate, key, and optional chain to Barbican.</para>
                    </step>
                    <step>
                        <para>Associate the Barbican container with the listener.</para>
                    </step>
                </substeps>
            </step>
            <step>
                <para>Optional. If you use layer-7 HTTP switching, complete these tasks:</para>
                <substeps>
                    <step>
                        <para>Create any additional pools, members, and health monitors that are
                            used as non-default pools.</para>
                    </step>
                    <step>
                        <para>Create a layer-7 policy that associates the listener with the
                            non-default pool.</para>
                    </step>
                    <step>
                        <para>Create rules for the layer-7 policy that describe the logic that
                            selects the non-default pool for servicing some requests. </para>
                    </step>
                </substeps>
            </step>
        </procedure>
    </section>
    <section xml:id="lbaas_ext_ops_loadbalancer">
        <title>Load balancers</title>
        <para>Create and manage load balancers through the LBaaS extension.</para>
        <wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
            <wadl:resource
                href="http://git.openstack.org/cgit/openstack/api-site/plain/api-ref/src/wadls/netconn-api/src/os-lbaas-ext.wadl#loadbalancers">
                <wadl:method href="#createLoadBalancer"/>
                <wadl:method href="#listLoadBalancers"/>
            </wadl:resource>
            <wadl:resource
                href="http://git.openstack.org/cgit/openstack/api-site/plain/api-ref/src/wadls/netconn-api/src/os-lbaas-ext.wadl#lb_id">
                <wadl:method href="#showLoadBalancer"/>
                <wadl:method href="#updateLoadBalancer"/>
                <wadl:method href="#deleteLoadBalancer"/>
            </wadl:resource>
        </wadl:resources>
    </section>
    <!-- end of loadbalancer section-->
    <section xml:id="lbaas_ext_ops_listener">
        <title>Listeners</title>
        <para>Create and manage load-balancer listeners through the LBaaS extension.</para>
        <wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
            <wadl:resource
                href="http://git.openstack.org/cgit/openstack/api-site/plain/api-ref/src/wadls/netconn-api/src/os-lbaas-ext.wadl#Listeners">
                <wadl:method href="#createListener"/>
                <wadl:method href="#listListeners"/>
            </wadl:resource>
            <wadl:resource
                href="http://git.openstack.org/cgit/openstack/api-site/plain/api-ref/src/wadls/netconn-api/src/os-lbaas-ext.wadl#listener_id">
                <wadl:method href="#showListener"/>
                <wadl:method href="#updateListener"/>
                <wadl:method href="#deleteListener"/>
            </wadl:resource>
        </wadl:resources>
    </section>
    <!-- end of listner section-->
    <section xml:id="lbaas_ext_ops_pool">
        <title>Pools</title>
        <para>Create and manage load-balancer pools through the LBaaS extension.</para>
        <wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
            <wadl:resource
                href="http://git.openstack.org/cgit/openstack/api-site/plain/api-ref/src/wadls/netconn-api/src/os-lbaas-ext.wadl#lb-pools">
                <wadl:method href="#createPool"/>
                <wadl:method href="#listPools"/>
            </wadl:resource>
            <wadl:resource
                href="http://git.openstack.org/cgit/openstack/api-site/plain/api-ref/src/wadls/netconn-api/src/os-lbaas-ext.wadl#pool_id">
                <wadl:method href="#showPool"/>
                <wadl:method href="#updatePool"/>
                <wadl:method href="#deletePool"/>
            </wadl:resource>
        </wadl:resources>
    </section>
    <!-- end of pools section-->
    <section xml:id="lbaas_ext_ops_member">
        <title>Members</title>
        <para>Create and manage load-balancer pool members through the LBaaS extension.</para>
        <wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
            <wadl:resource
                href="http://git.openstack.org/cgit/openstack/api-site/plain/api-ref/src/wadls/netconn-api/src/os-lbaas-ext.wadl#lb-members">
                <wadl:method href="#createMember"/>
                <wadl:method href="#listMembers"/>
            </wadl:resource>
            <wadl:resource
                href="http://git.openstack.org/cgit/openstack/api-site/plain/api-ref/src/wadls/netconn-api/src/os-lbaas-ext.wadl#member_id">
                <wadl:method href="#showMember"/>
                <wadl:method href="#updateMember"/>
                <wadl:method href="#deleteMember"/>
            </wadl:resource>
        </wadl:resources>
    </section>
    <!-- end of members section-->
    <section xml:id="lbaas_ext_ops_health_monitor">
        <title>Health monitors</title>
        <para>Create and manage load-balancer health monitors through the LBaaS extension.</para>
        <wadl:resources xmlns:wadl="http://wadl.dev.java.net/2009/02">
            <wadl:resource
                href="http://git.openstack.org/cgit/openstack/api-site/plain/api-ref/src/wadls/netconn-api/src/os-lbaas-ext.wadl#lb-healthmonitors">
                <wadl:method href="#createHealthMonitor"/>
                <wadl:method href="#listHealthMonitors"/>
            </wadl:resource>
            <wadl:resource
                href="http://git.openstack.org/cgit/openstack/api-site/plain/api-ref/src/wadls/netconn-api/src/os-lbaas-ext.wadl#health_monitor_id_hm">
                <wadl:method href="#showHealthMonitor"/>
                <wadl:method href="#updateHealthMonitor"/>
                <wadl:method href="#deleteHealthMonitor"/>
            </wadl:resource>
        </wadl:resources>
    </section>
</section>
